<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXE ADMIN PANEL</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Orbitron:wght@700&display=swap');
        :root { --bg: #09090b; --glass: rgba(22, 22, 30, 0.9); --accent: #667eea; --success: #43e97b; --danger: #ff4757; }
        body { background: var(--bg); color: white; padding: 20px; font-family: 'Poppins', sans-serif; }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; background: var(--glass); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .logo { font-family: 'Orbitron'; color: var(--accent); font-size: 1.2rem; }
        .logout { color: var(--danger); text-decoration: none; font-weight: bold; border: 1px solid var(--danger); padding: 5px 15px; border-radius: 8px; }
        
        .panel-card { background: var(--glass); padding: 25px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px; }
        .card-title { font-family: 'Orbitron'; color: var(--accent); margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        
        .control-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .switch { position: relative; display: inline-block; width: 46px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--success); }
        input:checked + .slider:before { transform: translateX(22px); }

        .gen-btn { width: 100%; padding: 14px; background: linear-gradient(135deg, #43e97b, #38f9d7); border: none; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 15px; color: black; }
        .key-display { background: black; padding: 15px; margin-top: 15px; border-radius: 8px; color: var(--success); font-family: monospace; text-align: center; border: 1px dashed #333; display: none; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="header">
        <div class="logo">EXE ADMIN</div>
        <a href="/api/logout" class="logout">LOGOUT</a>
    </div>

    <div class="panel-card">
        <h3 class="card-title"><i class="fas fa-server"></i> SERVER CONTROL</h3>
        <div class="control-row">
            <span>Maintenance Mode</span>
            <label class="switch"><input type="checkbox"><span class="slider"></span></label>
        </div>
        <div class="control-row">
            <span>Bind Tool Status</span>
            <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
        </div>
    </div>

    <div class="panel-card">
        <h3 class="card-title"><i class="fas fa-key"></i> GENERATE KEY</h3>
        <select id="duration" style="width:100%; padding:12px; background:#222; color:white; border:1px solid #444; border-radius:8px;">
            <option value="1h">1 Hour Access</option>
            <option value="24h">24 Hours Access</option>
        </select>
        <button onclick="genKey()" class="gen-btn">CREATE KEY</button>
        <div id="result" class="key-display"></div>
    </div>

    <a href="/" target="_blank" style="display:block; text-align:center; color:#888; text-decoration:none; margin-top:20px;">Open Main Tool Page <i class="fas fa-external-link-alt"></i></a>

    <script>
        function genKey() {
            const dur = document.getElementById('duration').value;
            const res = document.getElementById('result');
            const btn = document.querySelector('.gen-btn');

            btn.innerText = "Processing...";

            fetch('/api/generate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({duration: dur})
            })
            .then(res => res.json())
            .then(data => {
                btn.innerText = "CREATE KEY";
                if(data.status === 'success') {
                    res.style.display = 'block';
                    res.innerText = data.key;
                } else {
                    window.location.href = '/login';
                }
            });
        }
    </script>
</body>
</html>
